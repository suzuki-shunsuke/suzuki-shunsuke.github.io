<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>2020/11 on melody</title>
    <link>https://suzuki-shunsuke.github.io/archives/2020/11/</link>
    <description>Recent content in 2020/11 on melody</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>jp</language>
    <lastBuildDate>Sat, 07 Nov 2020 14:43:10 +0900</lastBuildDate>
    
	<atom:link href="https://suzuki-shunsuke.github.io/archives/2020/11/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Splitting .circleci/config.yml</title>
      <link>https://suzuki-shunsuke.github.io/splitting-circleci-config/</link>
      <pubDate>Sat, 07 Nov 2020 14:43:10 +0900</pubDate>
      
      <guid>https://suzuki-shunsuke.github.io/splitting-circleci-config/</guid>
      <description>In this post I introduce how to split a huge .circleci/config.yml.
CircleCI doesn&amp;rsquo;t support to split .circleci/config.yml, so we manage all workflows and jobs configuration into one file .circleci/config.yml. If the repository is Monorepo, the more the number of services increases, the more the size of .circleci/config.yml becomes large and it&amp;rsquo;s hard to maintain .circleci/config.yml. By splitting .circleci/config.yml per service, it makes easy to maintain .circleci/config.yml and we can configure split file&amp;rsquo;s CODEOWNERS.</description>
    </item>
    
    <item>
      <title>github-ci-monitor: CI のステータスを DataDog で監視</title>
      <link>https://suzuki-shunsuke.github.io/github-ci-monitor/</link>
      <pubDate>Sun, 01 Nov 2020 17:51:44 +0900</pubDate>
      
      <guid>https://suzuki-shunsuke.github.io/github-ci-monitor/</guid>
      <description>自作の OSS github-ci-monitor の紹介です。
GitHub リポジトリの CI のステータスを定期的に取得し、 DataDog に送ることで、 CI のステータスを監視するツールです。 現状は AWS Lambda で動かすことを想定していますが、他の方法でも動かせるようにするつもりです。
Motivation モチベーションは、 PR をマージしたあとに CI がこけた場合に通知が欲しいというものです。 マージしたあとに CI が一瞬で終わるなら無事終わるのを見届けてもいいんですが、 数分かかると待ってるのも時間がもったいないです。 しばらくしたあとに結果を確認すればいいんですが、それも面倒くさいですし、普通に忘れます。 そうするとデプロイしたつもりが実は CI がこけてたなんてことが普通にあります。
そういうことにすぐ気づけるよう、 Slack に通知がほしいと思っていました。
仕組み 仕組みは単純です。
GitHub API で各リポジトリのステータスを取得し、 DataDog API でステータスを送信しています。 DataDog API は Service Check API を使っています。 status は以下のようになります。
 0: 正常 1: 異常 3: ステータスの取得に失敗  また以下の tag が付きます。
 owner: リポジトリのオーナー repo: リポジトリ名 ref: ブランチ名  各リポジトリのステータスは現状 3 つをサポートしています。</description>
    </item>
    
  </channel>
</rss>